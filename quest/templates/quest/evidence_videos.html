{% extends 'quest/base.html' %}
{% load static %}

{% block title %}EVIDENCE // VIDEOS{% endblock %}

{% block main %}
  <div class="main-header">
    <div class="main-title">EVIDENCE /// VIDEOS</div>
    <div class="main-meta">
      NODE: {{ node_code }} · <a href="{% url 'dashboard' %}" class="logout-link">back to panel</a>
    </div>
  </div>

  <div class="gallery-grid">
    {% for item in items %}
      <button class="gallery-item"
              data-type="video"
              data-full-src="{{ item.file.url }}"
              data-title="{{ item.title }}">
        
        <video class="gallery-thumb-video"
               src="{{ item.file.url }}"
               preload="metadata"
               muted>
        </video>

        <div class="gallery-video-overlay">
          <span class="video-play-icon">▶</span>
          <span class="video-caption">{{ item.title }}</span>
        </div>
      </button>
    {% empty %}
      <p>Пока нет видеозаписей.</p>
    {% endfor %}
  </div>
{% endblock %}

{% block modals %}
  {{ block.super }}
  <div class="gallery-backdrop" id="galleryBackdrop">
    <div class="gallery-modal">
      <div class="gallery-modal-header">
        <span class="gallery-modal-title" id="galleryTitle"></span>
        <span class="gallery-modal-close" id="galleryClose">&times;</span>
      </div>
      <div class="gallery-modal-body">
        <img id="galleryImage" src="" alt="" style="display:none;">
        <video id="galleryVideo" controls style="display:none;"></video>
      </div>
    </div>
  </div>
{% endblock %}

{% block extra_js %}
  <script src="{% static 'quest/js/evidence.js' %}"></script>
{% endblock %}
